import{g as q,r as d,j as G,K,c as v,a as e,k as N,b as n,s as w,w as _,T as k,J as Q,o as c,l as y,m as i,t as l,d as Z,z as W,I as H,A as Y,F as R,q as V}from"./MU1g5_jS.js";import{C as $,D as ee}from"./C23X1oyQ.js";import{L as O}from"./Bv1XGolS.js";import{C as te}from"./C4xTdfqK.js";import{c as se}from"./CqHiabNb.js";import{T as ae}from"./k5AWQ_Ux.js";import{C as oe}from"./DEd_DXIQ.js";import{C as le}from"./Dg4M9Jeq.js";import{X as re}from"./DQM4Hr08.js";/**
 * @license lucide-vue-next v0.484.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z=se("chart-column",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]),ne={class:"min-h-screen"},ie={class:"max-w-7xl mx-auto"},de={class:"mb-6 border-b border-gray-200"},ce={class:"flex space-x-4"},ue={key:0,class:"space-y-6"},me={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},ve={class:"bg-white rounded-lg shadow-sm p-6 transition-all duration-300 hover:shadow-md"},ge={class:"flex justify-between"},pe={class:"text-green-500 mb-2"},xe={class:"text-3xl font-bold"},fe={class:"text-gray-200"},he={class:"bg-white rounded-lg shadow-sm p-6 transition-all duration-300 hover:shadow-md"},ye={class:"flex justify-between"},be={class:"text-green-500 mb-2"},we={class:"text-3xl font-bold"},_e={class:"text-gray-200"},ke={class:"bg-white rounded-lg shadow-sm p-6"},Ce={class:"bg-green-50 rounded-lg p-4 h-64"},Pe={class:"bg-white rounded-lg shadow-sm p-6"},Se={class:"bg-green-50 rounded-lg p-4 h-64"},Te={key:0,class:"space-y-6"},Me={class:"bg-white rounded-lg shadow-sm p-6"},Ne={class:"flex flex-col md:flex-row md:justify-between md:items-center"},Oe={class:"text-green-500 mb-2"},Ae={class:"text-2xl font-bold"},De={class:"text-gray-200 hidden md:block"},je={class:"bg-white rounded-lg shadow-sm p-6"},Ie={class:"flex flex-col md:flex-row justify-between mb-4 items-start md:items-center"},We={class:"mb-4 md:mb-0"},Re={class:"w-full md:w-auto"},Ve={class:"overflow-x-auto"},$e={class:"min-w-full divide-y divide-gray-200"},ze={class:"bg-white divide-y divide-gray-200"},Be={key:0},Ee=["colspan"],Le={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},Ue={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},Fe={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},Je={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},Xe={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},qe={class:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium"},Ge=["onClick"],Ke={class:"flex flex-col md:flex-row justify-between items-center mt-4"},Qe={class:"text-sm text-gray-500 mb-4 md:mb-0"},Ze={class:"flex space-x-2"},He=["disabled"],Ye=["disabled"],et={key:0,class:"fixed inset-0 z-50 overflow-y-auto","aria-labelledby":"modal-title",role:"dialog","aria-modal":"true"},tt={class:"flex items-end justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0"},st={class:"inline-block align-bottom bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full"},at={class:"bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4"},ot={class:"sm:flex sm:items-start"},lt={class:"mx-auto flex-shrink-0 flex items-center justify-center h-12 w-12 rounded-full bg-red-100 sm:mx-0 sm:h-10 sm:w-10"},rt={class:"mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left"},nt={class:"mt-2"},it={class:"text-sm text-gray-500"},dt={class:"bg-gray-50 px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse"},ct={key:0,class:"fixed bottom-0 right-0 mb-4 mr-4 max-w-sm w-full bg-white shadow-lg rounded-lg pointer-events-auto ring-1 ring-black ring-opacity-5 overflow-hidden z-50"},ut={class:"p-4"},mt={class:"flex items-start"},vt={class:"flex-shrink-0"},gt={class:"ml-3 w-0 flex-1 pt-0.5"},pt={class:"text-sm font-medium text-gray-900"},xt={class:"mt-1 text-sm text-gray-500"},ft={class:"ml-4 flex-shrink-0 flex"};function ht(){return{fetchStats:async()=>(await new Promise(r=>setTimeout(r,500)),{totalOrders:0,todaysOrders:0}),fetchSales:async r=>(await new Promise(g=>setTimeout(g,500)),{sales:{totalSales:0,items:[]},pagination:{currentPage:r.page,perPage:r.perPage,total:0,lastPage:1,from:0,to:0}})}}function yt(C,u){let r=null;return function(...g){r&&clearTimeout(r),r=setTimeout(()=>{C(...g),r=null},u)}}const Ot=q({__name:"analyse",setup(C){const u=d("overview"),r=d(null),g=d(null),P=d(null),S=d(null),T=d(""),f=d(!1),p=d(null),m=d({show:!1,type:"success",title:"",message:"",timeout:null}),M=d({totalOrders:0,todaysOrders:0}),b=d({totalSales:0,items:[]}),o=d({currentPage:1,perPage:50,total:0,lastPage:1,from:0,to:0}),A=[{key:"productId",label:"PRODUCT ID"},{key:"name",label:"NAME"},{key:"count",label:"COUNT"},{key:"unitPrice",label:"UNIT PRICE(₦)"},{key:"sales",label:"SALES(₦)"}],{fetchStats:B,fetchSales:E}=ht(),h=a=>a.toFixed(2).replace(/\B(?=(\d{3})+(?!\d))/g,","),x=async()=>{const a=await E({page:o.value.currentPage,perPage:o.value.perPage,search:T.value});b.value=a.sales,o.value=a.pagination},D=yt(()=>{o.value.currentPage=1,x()},300),L=()=>{o.value.currentPage>1&&(o.value.currentPage--,x())},U=()=>{o.value.currentPage<o.value.lastPage&&(o.value.currentPage++,x())},F=()=>{j("Success","Sales data downloaded successfully","success")},J=a=>{p.value=a,f.value=!0},X=()=>{setTimeout(()=>{var a;f.value=!1,j("Success",`Withdrawal of ₦${h(((a=p.value)==null?void 0:a.sales)||0)} processed successfully`,"success"),x()},500)},j=(a,t,s)=>{m.value.timeout&&clearTimeout(m.value.timeout),m.value={show:!0,title:a,message:t,type:s,timeout:setTimeout(()=>{m.value.show=!1},3e3)}},I=()=>{if(r.value){const a=r.value.getContext("2d");a&&(P.value&&P.value.destroy(),P.value=new $(a,{type:"line",data:{labels:["January","March","May","July","September","November"],datasets:[{label:"Total Orders",data:[0,0,0,0,0,0],backgroundColor:"rgba(74, 222, 128, 0.2)",borderColor:"rgba(74, 222, 128, 1)",borderWidth:2,tension:.3,fill:!0}]},options:{responsive:!0,maintainAspectRatio:!1,scales:{y:{beginAtZero:!0,max:1,ticks:{stepSize:.5}}},plugins:{legend:{display:!0,position:"top"}}}}))}if(g.value){const a=g.value.getContext("2d");a&&(S.value&&S.value.destroy(),S.value=new $(a,{type:"doughnut",data:{labels:["No Data"],datasets:[{data:[1],backgroundColor:["rgba(229, 231, 235, 0.5)"],borderColor:["rgba(229, 231, 235, 1)"],borderWidth:1}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"right"}}}}))}};return G(async()=>{const a=await B();M.value=a,await x(),setTimeout(()=>{I()},100)}),K(u,a=>{a==="overview"&&setTimeout(()=>{I()},100)}),(a,t)=>(c(),v("div",ne,[e("div",ie,[e("div",de,[e("div",ce,[e("button",{onClick:t[0]||(t[0]=s=>u.value="overview"),class:w(["py-3 px-4 text-sm font-medium transition-all duration-200",u.value==="overview"?"border-b-2 border-green-500 text-green-600":"text-gray-500 hover:text-gray-700 hover:border-b-2 hover:border-gray-300"])}," Overview ",2),e("button",{onClick:t[1]||(t[1]=s=>u.value="sales"),class:w(["py-3 px-4 text-sm font-medium transition-all duration-200",u.value==="sales"?"border-b-2 border-green-500 text-green-600":"text-gray-500 hover:text-gray-700 hover:border-b-2 hover:border-gray-300"])}," Sales ",2)])]),n(k,{"enter-active-class":"transition-opacity duration-300 ease-out","enter-from-class":"opacity-0","enter-to-class":"opacity-100","leave-active-class":"transition-opacity duration-200 ease-in","leave-from-class":"opacity-100","leave-to-class":"opacity-0"},{default:_(()=>[u.value==="overview"?(c(),v("div",ue,[e("div",me,[e("div",ve,[e("div",ge,[e("div",null,[e("div",pe,[n(i(O),{class:"h-6 w-6"})]),e("h2",xe,l(M.value.totalOrders),1),t[8]||(t[8]=e("p",{class:"text-gray-500 text-sm"},"Total Orders",-1))]),e("div",fe,[n(i(te),{class:"h-16 w-16"})])])]),e("div",he,[e("div",ye,[e("div",null,[e("div",be,[n(i(O),{class:"h-6 w-6"})]),e("h2",we,l(M.value.todaysOrders),1),t[9]||(t[9]=e("p",{class:"text-gray-500 text-sm"},"Today's Orders",-1))]),e("div",_e,[n(i(z),{class:"h-16 w-16"})])])])]),e("div",ke,[t[10]||(t[10]=e("h2",{class:"text-lg font-medium mb-4"},"Monthly Analysis",-1)),e("div",Ce,[e("canvas",{ref_key:"monthlyChartRef",ref:r},null,512)])]),e("div",Pe,[t[11]||(t[11]=e("h2",{class:"text-lg font-medium mb-4"},"Location Analysis",-1)),e("div",Se,[e("canvas",{ref_key:"locationChartRef",ref:g},null,512)])])])):y("",!0)]),_:1}),n(k,{"enter-active-class":"transition-opacity duration-300 ease-out","enter-from-class":"opacity-0","enter-to-class":"opacity-100","leave-active-class":"transition-opacity duration-200 ease-in","leave-from-class":"opacity-100","leave-to-class":"opacity-0"},{default:_(()=>[u.value==="sales"?(c(),v("div",Te,[e("div",Me,[e("div",Ne,[e("div",null,[e("div",Oe,[n(i(O),{class:"h-6 w-6"})]),t[13]||(t[13]=e("p",{class:"text-gray-500 text-sm"},"Total Sales",-1)),e("h2",Ae,"₦"+l(h(b.value.totalSales)),1),e("button",{onClick:F,class:"mt-4 bg-green-500 hover:bg-green-600 text-white py-2 px-4 rounded-md transition-colors duration-200 flex items-center"},[n(i(ee),{class:"h-4 w-4 mr-2"}),t[12]||(t[12]=Z(" Download In Excel "))])]),e("div",De,[n(i(z),{class:"h-16 w-16"})])])]),e("div",je,[e("div",Ie,[e("div",We,[t[15]||(t[15]=e("label",{class:"text-sm text-gray-500"},"Show",-1)),W(e("select",{"onUpdate:modelValue":t[2]||(t[2]=s=>o.value.perPage=s),class:"mx-2 border border-gray-300 rounded-md p-1 text-sm",onChange:x},t[14]||(t[14]=[e("option",{value:"10"},"10",-1),e("option",{value:"25"},"25",-1),e("option",{value:"50"},"50",-1),e("option",{value:"100"},"100",-1)]),544),[[H,o.value.perPage]]),t[16]||(t[16]=e("span",{class:"text-sm text-gray-500"},"entries",-1))]),e("div",Re,[t[17]||(t[17]=e("label",{class:"text-sm text-gray-500 mr-2"},"Search:",-1)),W(e("input",{"onUpdate:modelValue":t[3]||(t[3]=s=>T.value=s),onInput:t[4]||(t[4]=(...s)=>i(D)&&i(D)(...s)),type:"text",class:"border border-gray-300 rounded-md p-2 w-full md:w-64"},null,544),[[Y,T.value]])])]),e("div",Ve,[e("table",$e,[e("thead",null,[e("tr",null,[(c(),v(R,null,V(A,s=>e("th",{key:s.key,class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},l(s.label),1)),64)),t[18]||(t[18]=e("th",{class:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider"}," Actions ",-1))])]),e("tbody",ze,[b.value.items.length===0?(c(),v("tr",Be,[e("td",{colspan:A.length+1,class:"px-6 py-4 text-center text-sm text-gray-500"}," No data available in table ",8,Ee)])):y("",!0),(c(!0),v(R,null,V(b.value.items,s=>(c(),v("tr",{key:s.id,class:"hover:bg-gray-50 transition-colors duration-150"},[e("td",Le,l(s.productId),1),e("td",Ue,l(s.name),1),e("td",Fe,l(s.count),1),e("td",Je," ₦"+l(h(s.unitPrice)),1),e("td",Xe," ₦"+l(h(s.sales)),1),e("td",qe,[e("button",{onClick:bt=>J(s),class:"text-green-600 hover:text-green-900 transition-colors duration-150"}," Withdraw ",8,Ge)])]))),128))])])]),e("div",Ke,[e("div",Qe," Showing "+l(o.value.from)+" to "+l(o.value.to)+" of "+l(o.value.total)+" entries ",1),e("div",Ze,[e("button",{onClick:L,disabled:o.value.currentPage===1,class:w(["px-4 py-2 text-sm border rounded-md transition-colors duration-150",o.value.currentPage===1?"border-gray-200 text-gray-400 cursor-not-allowed":"border-gray-300 text-gray-700 hover:bg-gray-50"])}," Previous ",10,He),e("button",{onClick:U,disabled:o.value.currentPage>=o.value.lastPage,class:w(["px-4 py-2 text-sm border rounded-md transition-colors duration-150",o.value.currentPage>=o.value.lastPage?"border-gray-200 text-gray-400 cursor-not-allowed":"border-gray-300 text-gray-700 hover:bg-gray-50"])}," Next ",10,Ye)])])])])):y("",!0)]),_:1})]),(c(),N(Q,{to:"body"},[n(k,{"enter-active-class":"transition duration-300 ease-out","enter-from-class":"transform scale-95 opacity-0","enter-to-class":"transform scale-100 opacity-100","leave-active-class":"transition duration-200 ease-in","leave-from-class":"transform scale-100 opacity-100","leave-to-class":"transform scale-95 opacity-0"},{default:_(()=>[f.value?(c(),v("div",et,[e("div",tt,[e("div",{class:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity","aria-hidden":"true",onClick:t[5]||(t[5]=s=>f.value=!1)}),t[20]||(t[20]=e("span",{class:"hidden sm:inline-block sm:align-middle sm:h-screen","aria-hidden":"true"},"​",-1)),e("div",st,[e("div",at,[e("div",ot,[e("div",lt,[n(i(ae),{class:"h-6 w-6 text-red-600"})]),e("div",rt,[t[19]||(t[19]=e("h3",{class:"text-lg leading-6 font-medium text-gray-900",id:"modal-title"}," Confirm Withdrawal ",-1)),e("div",nt,[e("p",it," Are you sure you want to withdraw ₦"+l(p.value?h(p.value.sales):"0.00")+" from "+l(p.value?p.value.name:"")+"? This action cannot be undone. ",1)])])])]),e("div",dt,[e("button",{onClick:X,class:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-red-600 text-base font-medium text-white hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 sm:ml-3 sm:w-auto sm:text-sm transition-colors duration-200"}," Withdraw "),e("button",{onClick:t[6]||(t[6]=s=>f.value=!1),class:"mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 sm:mt-0 sm:ml-3 sm:w-auto sm:text-sm transition-colors duration-200"}," Cancel ")])])])])):y("",!0)]),_:1})])),n(k,{"enter-active-class":"transform ease-out duration-300 transition","enter-from-class":"translate-y-2 opacity-0 sm:translate-y-0 sm:translate-x-2","enter-to-class":"translate-y-0 opacity-100 sm:translate-x-0","leave-active-class":"transition ease-in duration-100","leave-from-class":"opacity-100","leave-to-class":"opacity-0"},{default:_(()=>[m.value.show?(c(),v("div",ct,[e("div",ut,[e("div",mt,[e("div",vt,[m.value.type==="success"?(c(),N(i(oe),{key:0,class:"h-6 w-6 text-green-400"})):(c(),N(i(le),{key:1,class:"h-6 w-6 text-red-400"}))]),e("div",gt,[e("p",pt,l(m.value.title),1),e("p",xt,l(m.value.message),1)]),e("div",ft,[e("button",{onClick:t[7]||(t[7]=s=>m.value.show=!1),class:"bg-white rounded-md inline-flex text-gray-400 hover:text-gray-500 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500"},[t[21]||(t[21]=e("span",{class:"sr-only"},"Close",-1)),n(i(re),{class:"h-5 w-5"})])])])])])):y("",!0)]),_:1})]))}});export{Ot as default,yt as useDebounceFn,ht as useStats};
